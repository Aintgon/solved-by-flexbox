!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).firebase=t()}(this,function(){"use strict";function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=h(e[n],t[n]));return e}var n="FirebaseError",r=Error.captureStackTrace,p=function(e,t){if(this.code=e,this.message=t,r)r(this,o.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=n,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};p.prototype=Object.create(Error.prototype),(p.prototype.constructor=p).prototype.name=n;var e,o=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,r){void 0===r&&(r={});var t,n=this.errors[e],o=this.service+"/"+e;t=void 0===n?"Error":n.replace(this.pattern,function(e,t){var n=r[t];return void 0!==n?n.toString():"<"+t+"?>"}),t=this.serviceName+": "+t+" ("+o+").";var i=new p(o,t);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(i[a]=r[a]);return i},e}(),t=((e={})["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",e["bad-app-name"]="Illegal App name: '{$name}",e["duplicate-app"]="Firebase App named '{$name}' already exists",e["app-deleted"]="Firebase App named '{$name}' already deleted",e["duplicate-service"]="Firebase service named '{$name}' already registered",e["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",e),i=new o("app","Firebase",t);function d(e,t){throw i.create(e,t)}var g="[DEFAULT]",m=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=h(void 0,e),this.INTERNAL={}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var r=this;return new Promise(function(e){r.checkDestroyed_(),e()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(t){Object.keys(r.services_[t]).forEach(function(e){n.push(r.services_[t][e])})}),Promise.all(n.map(function(e){return e.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=g),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==g?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){h(this,e)},e.prototype.checkDestroyed_=function(){this.isDeleted_&&d("app-deleted",{name:this.name_})},e}(),v=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var a=function(){var a={},s={},c={},u={__esModule:!0,initializeApp:function(e,t){if(void 0===t&&(t={}),"object"!=typeof t||null===t){var n=t;t={name:n}}var r=t;void 0===r.name&&(r.name=g);var o=r.name;"string"==typeof o&&o||d("bad-app-name",{name:o+""}),v(a,o)&&d("duplicate-app",{name:o});var i=new m(e,r,u);return l(a[o]=i,"create"),i},app:p,apps:null,Promise:Promise,SDK_VERSION:"5.9.3_LITE",INTERNAL:{registerService:function(n,e,t,r,o){if("performance"!==n)throw Error(n+" cannot register with the Firebase instance in the performance script");s[n]&&d("duplicate-service",{name:n}),s[n]=e,r&&(c[n]=r,f().forEach(function(e){r("create",e)}));var i=function(e){return void 0===e&&(e=p()),"function"!=typeof e[n]&&d("invalid-app-argument",{name:n}),e[n]()};return void 0!==t&&h(i,t),u[n]=i,m.prototype[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,n).apply(this,o?e:[])},i},removeApp:function(e){l(a[e],"delete"),delete a[e]},factories:s}};function p(e){return v(a,e=e||g)||d("no-app",{name:e}),a[e]}function f(){return Object.keys(a).map(function(e){return a[e]})}function l(n,r){Object.keys(s).forEach(function(e){var t=function(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}(n,e);null!==t&&c[t]&&c[t](r,n)})}return Object.defineProperty(u,"apps",{get:f}),u}();function s(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function c(n,r,o){var i,e=new Promise(function(e,t){s(i=n[r].apply(n,o)).then(e,t)});return e.request=i,e}function u(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function f(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return c(this[n],e,arguments)})})}function l(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function y(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=c(e,n,arguments)).then(function(e){if(e)return new _(e,t.request)});var e,t})})}function b(e){this._index=e}function _(e,t){this._cursor=e,this._request=t}function w(e){this._store=e}function E(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function I(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new E(n)}function T(e){this._db=e}u(b,"_index",["name","keyPath","multiEntry","unique"]),f(b,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),y(b,"_index",IDBIndex,["openCursor","openKeyCursor"]),u(_,"_cursor",["direction","key","primaryKey","value"]),f(_,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(_.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),s(t._request).then(function(e){if(e)return new _(e,t._request)})})})}),w.prototype.createIndex=function(){return new b(this._store.createIndex.apply(this._store,arguments))},w.prototype.index=function(){return new b(this._store.index.apply(this._store,arguments))},u(w,"_store",["name","keyPath","indexNames","autoIncrement"]),f(w,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),y(w,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),l(w,"_store",IDBObjectStore,["deleteIndex"]),E.prototype.objectStore=function(){return new w(this._tx.objectStore.apply(this._tx,arguments))},u(E,"_tx",["objectStoreNames","mode"]),l(E,"_tx",IDBTransaction,["abort"]),I.prototype.createObjectStore=function(){return new w(this._db.createObjectStore.apply(this._db,arguments))},u(I,"_db",["name","version","objectStoreNames"]),l(I,"_db",IDBDatabase,["deleteObjectStore","close"]),T.prototype.transaction=function(){return new E(this._db.transaction.apply(this._db,arguments))},u(T,"_db",["name","version","objectStoreNames"]),l(T,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[w,b].forEach(function(e){i in e.prototype&&(e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],r=this._store||this._index,o=r[i].apply(r,t.slice(0,-1));o.onsuccess=function(){n(o.result)}})})}),[b,w].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,o=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(o.push(e.value),void 0===n||o.length!=n?e.continue():t(o)):t(o)})})})});var O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function N(i,a,s,c){return new(s||(s=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,a||[])).next())})}function S(n,r){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function k(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var C,A=1e4,D="0.0.1",R="FIS_v2",j="https://firebaseinstallations.googleapis.com/v1",P=36e5,U="installations",M=((C={})["missing-app-config-values"]="Missing App configuration values.",C["create-installation-failed"]="Could not register Firebase Installation.",C["generate-token-failed"]="Could not generate Auth Token.",C["not-registered"]="Firebase Installation is not registered.",C["installation-not-found"]="Firebase Installation not found.",C["create-installation-request-failed"]='Create Installation request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',C["generate-token-request-failed"]='Generate Auth Token request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',C["app-offline"]="Could not process request. Application offline.",C),L=new o(U,"Installations",M);function q(e){if(!e.options)throw L.create("missing-app-config-values");var t=e.options,n=t.projectId,r=t.apiKey,o=t.appId;if(!n||!r||!o)throw L.create("missing-app-config-values");return{projectId:n,apiKey:r,appId:o}}function x(f,l){return N(this,void 0,void 0,function(){var o,i,a,s,c,u,p;return S(this,function(e){switch(e.label){case 0:return n=f.projectId,r=l.fid,o=B(n)+"/"+r+"/authTokens:generate",i={installation:{sdkVersion:D}},a=new Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:(t=l.refreshToken,R+" "+t),"x-goog-api-key":f.apiKey}),s={method:"POST",headers:a,body:JSON.stringify(i)},[4,fetch(o,s)];case 1:return(c=e.sent()).ok?[4,c.json()]:[3,3];case 2:return u=e.sent(),[2,F(u)];case 3:return[4,K(c)];case 4:throw p=e.sent(),L.create("generate-token-request-failed",{serverCode:p.code,serverMessage:p.message,serverStatus:p.status})}var t,n,r})})}function B(e){return j+"/projects/"+e+"/installations"}function F(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function K(t){return N(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return[4,t.json()];case 1:return[2,e.sent().error]}})})}var V,W,G,H,$,z="firebase-installations-store",J=(V=function(e){switch(e.oldVersion){case 0:e.createObjectStore(z)}},W=c(indexedDB,"open",["firebase-installations-database",1]),(G=W.request)&&(G.onupgradeneeded=function(e){V&&V(new I(G.result,e.oldVersion,G.transaction))}),W.then(function(e){return new T(e)}));function Q(r,o){return N(this,void 0,void 0,function(){var t,n;return S(this,function(e){switch(e.label){case 0:return[4,J];case 1:return t=e.sent(),(n=t.transaction(z,"readwrite")).objectStore(z).put(o,r),[4,n.complete];case 2:return e.sent(),[2,o]}})})}function X(r){return N(this,void 0,void 0,function(){var t,n;return S(this,function(e){switch(e.label){case 0:return[4,J];case 1:return t=e.sent(),(n=t.transaction(z,"readwrite")).objectStore(z).delete(r),[2,n.complete]}})})}function Y(a,s){return N(this,void 0,void 0,function(){var t,n,r,o,i;return S(this,function(e){switch(e.label){case 0:return[4,J];case 1:return t=e.sent(),n=t.transaction(z,"readwrite"),[4,(r=n.objectStore(z)).get(a)];case 2:return o=e.sent(),(i=s(o))===o?[2,i]:(void 0===i?r.delete(a):r.put(i,a),[4,n.complete]);case 3:return e.sent(),[2,i]}})})}function Z(e){var t=e instanceof Uint8Array?e:new Uint8Array(e);return btoa(String.fromCharCode.apply(String,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e}(t))).replace(/\+/g,"-").replace(/\//g,"_")}function ee(){var e=new Uint8Array(17);return crypto.getRandomValues(e),e[0]=112+e[0]%16,Z(e).substr(0,22)}function te(e){return 1===e.registrationStatus&&e.registrationTime+A<Date.now()}function ne(o){return N(this,void 0,void 0,function(){var r,t;return S(this,function(e){switch(e.label){case 0:return t={},[4,Y(o.appId,function(e){var t=function(e){var t=e||{fid:ee(),registrationStatus:0};if(te(t))return{fid:t.fid,registrationStatus:0};return t}(e),n=function(e,t){{if(0===t.registrationStatus&&navigator.onLine){var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(r,o){return N(this,void 0,void 0,function(){var t,n;return S(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,function(c,u){return N(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return S(this,function(e){switch(e.label){case 0:return t=B(c.projectId),n={fid:u.fid,authVersion:R,appId:c.appId,sdkVersion:D},r=new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":c.apiKey}),o={method:"POST",headers:r,body:JSON.stringify(n)},[4,fetch(t,o)];case 1:return(i=e.sent()).ok?[4,i.json()]:[3,3];case 2:return a=e.sent(),[2,{fid:u.fid,registrationStatus:2,refreshToken:a.refreshToken,authToken:F(a.authToken)}];case 3:return[4,K(i)];case 4:throw s=e.sent(),L.create("create-installation-request-failed",{serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}})})}(r,o)];case 1:return t=e.sent(),[4,Q(r.appId,t)];case 2:return e.sent(),[3,8];case 3:return(n=e.sent())instanceof p&&n.code===U+"/create-installation-request-failed"&&409===n.serverCode?[4,X(r.appId)]:[3,5];case 4:return e.sent(),[3,7];case 5:return[4,Q(r.appId,{fid:o.fid,registrationStatus:0})];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(e,n);return{installationEntry:n,registrationPromise:r}}return{installationEntry:t}}}(o,t);return r=n.registrationPromise,n.installationEntry})];case 1:return[2,(t.installationEntry=e.sent(),t.registrationPromise=r,t)]}})})}function re(t){return new Promise(function(e){setTimeout(e,t)})}function oe(i){return N(this,void 0,void 0,function(){var t,n,r,o;return S(this,function(e){switch(e.label){case 0:return[4,ne(t=q(i))];case 1:return n=e.sent(),r=n.installationEntry,(o=n.registrationPromise)?[4,o]:[3,3];case 2:return e.sent(),[3,6];case 3:return 1!==r.registrationStatus?[3,5]:[4,function(n){return N(this,void 0,void 0,function(){var t;return S(this,function(e){switch(e.label){case 0:return[4,ae(n)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,re(100)];case 3:return e.sent(),[4,ae(n)];case 4:return t=e.sent(),[3,2];case 5:if(0===t.registrationStatus)throw L.create("create-installation-failed");return[2,t]}})})}(t.appId)];case 4:return e.sent(),[3,6];case 5:if(0===r.registrationStatus)throw L.create("create-installation-failed");e.label=6;case 6:return[2,function(u){return N(this,void 0,void 0,function(){var c,t,n;return S(this,function(e){switch(e.label){case 0:return[4,Y(u.appId,function(e){if(!se(e))throw L.create("not-registered");var t,n,r,o,i,a=e.authToken;if(2!==(r=a).requestStatus||(o=r,(i=Date.now())<o.creationTime||o.creationTime+o.expiresIn<i+P)){if(1===a.requestStatus)return c=function(r){return N(this,void 0,void 0,function(){var t,n;return S(this,function(e){switch(e.label){case 0:return[4,ie(r)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,re(100)];case 3:return e.sent(),[4,ie(r)];case 4:return t=e.sent(),[3,2];case 5:if(0===(n=t.authToken).requestStatus)throw L.create("generate-token-failed");return[2,n]}})})}(u.appId),e;if(!navigator.onLine)throw L.create("app-offline");var s=(t=e,n={requestStatus:1,requestTime:Date.now()},O({},t,{authToken:n}));return c=function(o,i){return N(this,void 0,void 0,function(){var t,n,r;return S(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,x(o,i)];case 1:return t=e.sent(),r=O({},i,{authToken:t}),[4,Q(o.appId,r)];case 2:return e.sent(),[2,t];case 3:return(n=e.sent())instanceof p&&n.code===U+"/generate-token-request-failed"&&(401===n.serverCode||404===n.serverCode)?[4,X(o.appId)]:[3,5];case 4:return e.sent(),[3,7];case 5:return r=O({},i,{authToken:{requestStatus:0}}),[4,Q(o.appId,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(u,s),s}return e})];case 1:return t=e.sent(),c?[4,c]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n.token]}})})}(t)]}})})}function ie(e){return Y(e,function(e){if(!se(e))throw L.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+A<Date.now()?O({},e,{authToken:{requestStatus:0}}):e})}function ae(e){return Y(e,function(e){if(!e)throw L.create("installation-not-found");return te(e)?{fid:e.fid,registrationStatus:0}:e})}function se(e){return void 0!==e&&2===e.registrationStatus}($=H||(H={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT";var ce=H.INFO,ue=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case H.DEBUG:case H.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case H.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case H.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case H.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},pe=function(){function e(e){this.name=e,this._logLevel=ce,this._logHandler=ue}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in H))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,H.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,H.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,H.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,H.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,H.ERROR].concat(e))},e}(),fe="@firebase/clearcut-time-cache",le=3,he="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",de=function(e){return e.logSource&&e.message&&e.eventTime},ge=function(e){if(!e)return[];try{var t=JSON.parse(e);return Array.isArray(t)&&t.every(function(e){return de(e)})?t:[]}catch(e){return[]}}(localStorage.getItem("@firebase/clearcut-cache")),me=(function(e){var t=Date.now();if(!e)return;var n=new Date(e).getTime()}(localStorage.getItem(fe)),function(e){setTimeout(function(){if(0!==le){if(!ge.length)return me(1e4);var e=ge.slice();ge=[];var i={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}}},a=e.reduce(function(e,t){return e[t.logSource]||(e[t.logSource]=[]),e[t.logSource]=e[t.logSource].concat([t]),e},{}),t=Object.keys(a).map(function(e){var t=a[e],n=t.map(function(e){return{source_extension_json:e.message,event_time_ms:String(e.eventTime)}}),r=t.reduce(function(e,t){return e||t.logSource},null),o=Object.assign({},i,{log_source:r,log_event:n});return fetch(he,{method:"POST",body:JSON.stringify(o)}).then(function(e){if(!e.ok)throw e.statusText;return e.json()}).catch(function(e){ge=t.concat(ge)})});Promise.all(t).then(function(e){return e.reduce(function(e,t){return Math.max(e,parseInt(t.next_request_wait_millis,10))},1e4)}).then(function(e){localStorage.setItem(fe,Date.now()+e),le=3,me(e)}).catch(function(e){le--,console.log("Call to Firebase backend failed. Tries left: "+le+"."),me(1e4)})}},e)});function ve(i,a,s){return function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=a.apply(void 0,n);!function(e,t){if(!de(e))throw new Error("Attempted to queue invalid clearcut event");t&&(he=t),ge=ge.concat([e])}({logSource:i,message:o,eventTime:Date.now()},s)}}me(5e3);var ye=function(e,t){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var be,_e,we=function(){function e(){this.value=0}return e.prototype.incrementCounter=function(e){void 0===e&&(e=1),this.value=this.value+e},e.prototype.getCounterValue=function(){return this.value},e.prototype.putCounter=function(e){this.value=e},e}(),Ee="0.0.2",Ie="FB-PERF-TRACE-MEASURE",Te="@firebase/performance/config",Oe="@firebase/performance/configexpire",Ne=function(){function e(){}return e.prototype.setPerformance=function(e){this.performance=e},e.prototype.setPerformanceObserver=function(e){this.PerformanceObserver=e},e.prototype.setWindowLocation=function(e){this.windowLocation=e},e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance.getEntriesByType(e)},e.prototype.getEntriesByName=function(e){return this.performance.getEntriesByName(e)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.setupObserver=function(e,o){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];o(r)}}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===be&&(be=new e),be},e}();var Se,ke,Ce,Ae,De,Re,je,Pe=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!0,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.configTimeToLive=12}return e.prototype.setAppConfig=function(e){if(!e.appId)throw new Error("Firebase config object does not include appId");if(!e.projectId)throw new Error("Firebase config object does not include projectId");if(!e.apiKey)throw new Error("Firebase config object does not include apiKey");this.appId=e.appId,this.projectId=e.projectId,this.apiKey=e.apiKey},e.prototype.getAppId=function(){return this.appId},e.prototype.getProjectId=function(){return this.projectId},e.prototype.getApiKey=function(){return this.apiKey},e.prototype.getAppConfig=function(){return{appId:this.appId,projectId:this.projectId,apiKey:this.apiKey}},e.getInstance=function(){return void 0===_e&&(_e=new e),_e},e}();function Ue(){var e=function(t){return N(this,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return[4,ne(q(t))];case 1:return[2,e.sent().installationEntry.fid]}})})}({options:Pe.getInstance().getAppConfig()});return e.then(function(e){Se=e}),e}function Me(){return Se}function Le(){switch(Ne.getInstance().document.visibilityState){case"visible":return Ae.VISIBLE;case"hidden":return Ae.HIDDEN;case"prerender":return Ae.PRERENDER;default:return Ae.UNKNOWN}}(Ce=ke||(ke={}))[Ce.UNKNOWN=0]="UNKNOWN",Ce[Ce.UNSUPPORTED=1]="UNSUPPORTED",Ce[Ce.CONTROLLED=2]="CONTROLLED",Ce[Ce.UNCONTROLLED=3]="UNCONTROLLED",(De=Ae||(Ae={}))[De.UNKNOWN=0]="UNKNOWN",De[De.VISIBLE=1]="VISIBLE",De[De.HIDDEN=2]="HIDDEN",De[De.PRERENDER=3]="PRERENDER",De[De.UNLOADED=4]="UNLOADED",(je=Re||(Re={}))[je.UNKNOWN=0]="UNKNOWN",je[je.CONNECTION_SLOW_2G=1]="CONNECTION_SLOW_2G",je[je.CONNECTION_2G=2]="CONNECTION_2G",je[je.CONNECTION_3G=3]="CONNECTION_3G",je[je.CONNECTION_4G=4]="CONNECTION_4G";var qe="0.0.1";function xe(e){var o,t,n=function(){var e=Ne.getInstance().localStorage,t=e.getItem(Oe);if(!(t&&(n=t,Number(n)>Date.now())))return;var n;var r=e.getItem(Te);try{var o=JSON.parse(r);return o}catch(e){return}}();return n?(Be(n),Promise.resolve()):(o=e,(t=oe({options:Pe.getInstance().getAppConfig()}),t.then(function(e){}),t).then(function(e){var t=Pe.getInstance().getProjectId(),n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+t+"/namespaces/fireperf:fetch?key="+Pe.getInstance().getApiKey(),r=new Request(n,{method:"POST",body:JSON.stringify({app_instance_id:o,app_instance_id_token:e,app_id:Pe.getInstance().getAppId(),app_version:Ee,sdk_version:qe})});return fetch(r).then(function(e){if(e.ok)return e.json()})}).catch(function(e){})).then(function(e){return Be(e)}).then(function(e){return function(e){if(!e)return;var t=Ne.getInstance().localStorage;t.setItem(Te,JSON.stringify(e)),t.setItem(Oe,String(Date.now()+60*Pe.getInstance().configTimeToLive*60*1e3))}(e)},function(){})}function Be(e){if(!e||!e.entries)return e;var t=Pe.getInstance(),n=e.entries;return void 0!==n.fpr_enabled&&(t.loggingEnabled="true"===String(n.fpr_enabled)),n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e}var Fe,Ke,Ve,We,Ge="notInitialized";function He(){return Ge="initializationPending",Fe=Fe||Ue().then(function(e){return xe(e)}).then(function(){return $e()},function(){return $e()})}function $e(){Ge="initialized"}function ze(){if(We)return We;var e=Pe.getInstance(),t=ve(e.logSource,Xe,e.logEndPointUrl);return(We=new pe("@firebase/performance")).logHandler=t,We}function Je(e){var t=Pe.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&(e.isAuto&&Le()!==Ae.VISIBLE||t.loggingEnabled&&et(t.tracesSamplingRate)&&("initialized"===Ge?Qe(e):He().then(function(){return Qe(e)},function(){return Qe(e)})))}function Qe(e){Me()&&setTimeout(function(){return ze().log(e,Ke.Trace)},0)}function Xe(e,t){return t===Ke.NetworkRequest?(r={url:(n=e).url,http_method:1,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:Ye(),network_request_metric:r},JSON.stringify(o)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs,counters:void 0,custom_attributes:void 0},n=e.getCounters();0!==Object.keys(n).length&&(t.counters=Ze(n));var r=e.getAttributes();0!==Object.keys(r).length&&(t.custom_attributes=Ze(r));var o={application_info:Ye(),trace_metric:t};return JSON.stringify(o)}(e);var n,r,o}function Ye(){return{google_app_id:Pe.getInstance().getAppId(),app_instance_id:Me(),web_app_info:{sdk_version:Ee,page_url:Ne.getInstance().getUrl(),service_worker_status:(e=Ne.getInstance().navigator,"serviceWorker"in e?e.serviceWorker.controller?ke.CONTROLLED:ke.UNCONTROLLED:ke.UNSUPPORTED),visibility_state:Le(),effective_connection_type:function(){var e=Ne.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return Re.CONNECTION_SLOW_2G;case"2g":return Re.CONNECTION_2G;case"3g":return Re.CONNECTION_3G;case"4g":return Re.CONNECTION_4G;default:return Re.UNKNOWN}}()},application_process_state:0};var e}function Ze(t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}})}function et(e){return Math.random()<=e}(Ve=Ke||(Ke={}))[Ve.NetworkRequest=0]="NetworkRequest",Ve[Ve.Trace=1]="Trace";var tt=function(){function c(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state="uninitialized",this.customAttributes={},this.counters={},this.api=Ne.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||Ie+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return c.prototype.start=function(){if("uninitialized"!==this.state)throw new Error("Trace "+this.name+" is started before.");this.api.mark(this.traceStartMark),this.state="running"},c.prototype.stop=function(){if("running"!==this.state)throw new Error("Trace "+this.name+" is not running.");this.state="terminated",this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Je(this)},c.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes)for(var r in n.attributes)this.customAttributes[r]=String(n.attributes[r]);if(n&&n.metrics)for(var o in n.metrics)NaN!==Number(n.metrics[o])&&(this.counters[o]=new we,this.counters[o].putCounter(Number(Math.floor(n.metrics[o]))));Je(this)},c.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&(this.counters[e]=new we),this.counters[e].incrementCounter(t)},c.prototype.putMetric=function(e,t){void 0===this.counters[e]&&(this.counters[e]=new we),this.counters[e].putCounter(t)},c.prototype.getMetric=function(e){return this.counters[e]&&this.counters[e].getCounterValue()||0},c.prototype.putAttribute=function(e,t){this.customAttributes[e]=t},c.prototype.getAttribute=function(e){return this.customAttributes[e]},c.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},c.prototype.getAttributes=function(){return Object.assign({},this.customAttributes)},c.prototype.getCounters=function(){var t=this,e=Object.keys(this.counters),n={};return e.forEach(function(e){return n[e]=t.counters[e].getCounterValue()}),n},c.prototype.setStartTime=function(e){this.startTimeUs=e},c.prototype.setDuration=function(e){this.durationUs=e},c.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},c.createOobTrace=function(e,t,n){var r=Ne.getInstance().getUrl();if(r){var o=new c("_wt_"+r,!0),i=Math.floor(1e3*Ne.getInstance().getTimeOrigin());if(o.setStartTime(i),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.incrementMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.incrementMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.incrementMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),t){var a=t.find(function(e){return"first-paint"===e.name});a&&a.startTime&&o.incrementMetric("_fp",Math.floor(1e3*a.startTime));var s=t.find(function(e){return"first-contentful-paint"===e.name});s&&s.startTime&&o.incrementMetric("_fcp",Math.floor(1e3*s.startTime)),n&&o.incrementMetric("_fid",Math.floor(1e3*n))}Je(o)}},c.createUserTimingTrace=function(e){Je(new c(e,!1,e))},c}(),nt=function(){function c(e,t,n,r,o,i,a,s,c,u){this.url=e,this.httpMethod=t,this.requestPayloadBytes=n,this.responsePayloadBytes=r,this.httpResponseCode=o,this.responseContentType=i,this.startTimeUs=a,this.timeToRequestCompletedUs=s,this.timeToResponseInitiatedUs=c,this.timeToResponseCompletedUs=u}return c.createNetworkRequestEntry=function(e){if(e){var t,n,r=Ne.getInstance().getTimeOrigin(),o=Math.floor(1e3*(e.startTime+r)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,a=Math.floor(1e3*(e.responseEnd-e.startTime)),s=new c(e.name,void 0,void 0,e.transferSize,void 0,void 0,o,void 0,i,a);t=s,(n=Pe.getInstance()).instrumentationEnabled&&t.url!==n.logEndPointUrl&&n.loggingEnabled&&et(n.networkRequestsSamplingRate)&&setTimeout(function(){return ze().log(t,Ke.NetworkRequest)},0)}},c}(),rt=function(){function e(){var e=this;this.api=Ne.getInstance(),Me()&&(document&&"complete"!==document.readyState?document.addEventListener("readystatechange",function(){"complete"===document.readyState&&e.setup()}):this.setup())}return e.prototype.setup=function(){var e=this;setTimeout(function(){return e.setupOobTraces()},0),setTimeout(function(){return e.setupNetworkRequests()},0),setTimeout(function(){return e.setupUserTimingTraces()},0)},e.prototype.setupNetworkRequests=function(){for(var e=0,t=this.api.getEntriesByType("resource");e<t.length;e++){ot(t[e])}this.api.setupObserver("resource",ot)},e.prototype.setupOobTraces=function(){var t=this.api.getEntriesByType("navigation"),n=this.api.getEntriesByType("paint");if(this.api.onFirstInputDelay){var r=setTimeout(function(){tt.createOobTrace(t,n),r=void 0},4500);this.api.onFirstInputDelay(function(e){r&&(clearTimeout(r),tt.createOobTrace(t,n,e))})}else tt.createOobTrace(t,n)},e.prototype.setupUserTimingTraces=function(){for(var e=0,t=this.api.getEntriesByType("measure");e<t.length;e++){it(t[e])}this.api.setupObserver("measure",it)},e}();function ot(e){nt.createNetworkRequestEntry(e)}function it(e){var t=e.name;t.substring(0,Ie.length)!==Ie&&tt.createUserTimingTrace(t)}var at=function(){function e(){He().then(st,st)}return e.prototype.trace=function(e){return new tt(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Pe.getInstance().instrumentationEnabled},set:function(e){Pe.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Pe.getInstance().dataCollectionEnabled},set:function(e){Pe.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),e}();function st(){Me()&&new rt}var ct=function(e){var t;return t=e,Pe.getInstance().setAppConfig(t.options),new pt(e)};var ut,pt=function(n){function e(e){var t=n.call(this)||this;return t.app=e,t}return function(e,t){function n(){this.constructor=e}ye(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(e,n),e}(at);return window.fetch&&window.Promise?(ut=a,function(e){if(e){var t=Ne.getInstance();t.setPerformance(e.performance),t.setPerformanceObserver(e.PerformanceObserver),t.setWindowLocation(e.location),t.navigator=e.navigator,t.document=e.document,t.localStorage=e.localStorage,e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(t.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}}(window),ut.INTERNAL.registerService("performance",ct,{})):console.log("Firebase Performance cannot start if browser does not support fetch and Promise."),a});
